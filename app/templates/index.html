<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–°–∞–π—Ç –∞–Ω—Ç–∏–≤–∏–∑–∏—Ç–∫–∞</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            font-family: "Arial", sans-serif;
            text-align: center;
            height: 100%;
            overflow-y: scroll;
        }

        section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .section1 {
            background: url('/static/images/stella_main.jpg') repeat;
            background-size: 6% auto;
            padding-top: 50px;
        }

        .site-title {
            position: absolute;
            top: 5px;
            font-size: 45px;
            color: yellow;
            text-shadow: 4px 4px 8px black;
        }

        .content-container {
            display: flex;
            width: 80%;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            margin-top: 40px;
        }

        .text-container {
            width: 30%;
            font-size: 18px;
            line-height: 1.6;
            color: white;
            background: rgba(0, 0, 0, 0.6);
            padding: 10px;
            border-radius: 20px;
        }

        .auth-container {
            display: flex;
            flex-direction: row;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 20px;
        }

        .btn {
            font-size: 18px;
            font-weight: bold;
            text-decoration: none;
            background: #ddd;
            padding: 15px 30px;
            border: 3px solid #bbb;
            border-radius: 8px;
            color: black;
            transition: 0.3s;
            margin: 10px;
            display: inline-block;
            cursor: pointer;
        }

        .btn:hover {
            color: white;
            background: #777;
        }

        .section2 {
            background: url('/static/images/stella_weird_looking.jpg') no-repeat center center fixed;
            background-size: cover;
            padding: 40px 10px;
        }

        .section3 {
            background: url('/static/images/jurnalyuga.jpg') no-repeat center center fixed;
            background-size: 100% 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .news-container {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 5px;
            color: white;
            font-size: 18px;
        }

        .button-container {
            display: flex;
            gap: 25px;
            margin-top: 20px;
        }

        .dancer {
            margin-top: 40px;
            width: 40%;
            height: auto;
        }

        .hidden {
            display: none;
        }

        /* –°–µ–∫—Ü–∏—è 2 */
        #api-result {
            text-align: left;
            background: rgba(0,0,0,0.6);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 10px;
            max-width: 80%;
            animation: fadeIn 0.8s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* –ö–Ω–æ–ø–∫–∞ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Å–ª–æ–≤–∞ */
        #random-btn {
            transition: transform 0.2s ease, background-color 0.3s ease;
        }

        #random-btn:hover {
            transform: scale(1.05);
            background-color: #f1c40f;
        }

        #random-btn:active {
            transform: scale(0.95);
        }

        /* –≠—Ñ—Ñ–µ–∫—Ç –∫—É–ª–¥–∞—É–Ω–∞ */
        #random-btn.cooldown {
            animation: pulse 1s infinite;
            cursor: not-allowed;
        }

        @keyframes pulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }

        @media (max-width: 768px) {
            .content-container {
                flex-direction: column;
                align-items: center;
            }

            .text-container {
                width: 90%;
                text-align: center;
                font-size: 18px;
            }

            .auth-container {
                flex-direction: column;
            }
        }
    </style>
</head>

<body>

    <!-- SECTION 1 -->
    <section class="section1">
        <h1 class="site-title">üöÄ –°–∞–π—Ç –∞–Ω—Ç–∏–≤–∏–∑–∏—Ç–∫–∞ üöÄ</h1>
        <div class="content-container">
            <div class="text-container">
                <p>
                    –≠—Ç–æ—Ç –º–∏–Ω–∏-—Å–∞–π—Ç–∏–∫ ‚Äî –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –º–æ–∏—Ö –∑–Ω–∞–Ω–∏–π –≤ <strong>–≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</strong>.
                    –û–Ω –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ <strong>FastAPI</strong> ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–µ –¥–ª—è Python.
                    –í –∫–∞—á–µ—Å—Ç–≤–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è <strong>PostgreSQL</strong> –≤ —Å–≤—è–∑–∫–µ —Å <strong>SQLAlchemy</strong>.
                </p>
            </div>
            <div class="auth-container">
                <a href="/api/users/login" id="login-btn" class="btn">üîë –í–æ–π—Ç–∏</a>
                <a href="/api/users/register" id="register-btn" class="btn">üìù –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
                <a href="#" id="logout-btn" class="btn hidden">üö™ –í—ã–π—Ç–∏</a>
            </div>
            <div class="text-container">
                <p>
                    üîê <strong>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</strong> —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ <strong>JWT-—Ç–æ–∫–µ–Ω—ã</strong>.
                    –ú–æ–∂–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è, –ø—Ä–∏–¥—É–º–∞–≤ <em>–ª—é–±–æ–π email</em> –∏ –ø–∞—Ä–æ–ª—å. –ï—Å–ª–∏ –ª–µ–Ω—å, —Ç–æ –º–æ–∂–Ω–æ –∑–∞–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è –ø–æ —Å–≤—è–∑–∫–µ
                    <strong>log: nikita, pas: 123</strong>, –∏ –±—É–¥—É—Ç –≤–∞–º –µ—â–µ –º–æ–ø—Å–∏–∫–∏.
                </p>
            </div>
        </div>
        <img id="dancer" class="dancer hidden" src="/static/images/funny_pugs_main.gif" alt="–¢–∞–Ω—Ü—É—é—â–∏–µ –º–æ–ø—Å—ã">
    </section>

    <!-- SECTION 2 -->
    <section class="section2">
        <h1 id="word-title" style="font-size: 48px; color: yellow; text-shadow: 3px 3px 6px black; margin-bottom: 20px;">
            üìñ –°–ª–æ–≤–æ –¥–Ω—è
        </h1>

        <div id="api-result">
            <p>–ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ª–æ–≤–æ –¥–Ω—è...</p>
        </div>

        <button id="random-btn" class="btn" style="margin-top: 30px;">üé≤ –°–ª—É—á–∞–π–Ω–æ–µ —Å–ª–æ–≤–æ</button>
    </section>

    <!-- SECTION 3 -->
    <section class="section3">
        <div class="news-container">
            <p>üì∞ –ò–∑–Ω–∞—á–∞–ª—å–Ω–∞—è –∏–¥–µ—è —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—á–∫–∏ –∑–∞–∫–ª—é—á–∞–ª–∞—Å—å –≤ —Ç–æ–º, —á—Ç–æ –∫–æ–≥–¥–∞-—Ç–æ —è —Ö–æ—Ç–µ–ª —Å–¥–µ–ª–∞—Ç—å —Å–µ–±–µ RSS –ª–µ–Ω—Ç—É.
                –ü–æ—Ç–æ–º —è –æ—Ç –Ω–µ–µ –æ—Ç–∫–∞–∑–∞–ª—Å—è, –Ω–æ –¥–ª—è —É—Å–ø–æ–∫–æ–µ–Ω–∏—è –¥—É—à–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª –ø–∞—Ä—Å–∏–Ω–≥ –ø–∞—Ä–æ—á–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤.
                –ú–æ–∂–Ω–æ –ø–æ–∂–º–∞–∫–∞—Ç—å –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, —á—Ç–æ —Ç–∞–º –ø–∏—à–µ—Ç NY Times, –Ω—É –∏–ª–∏ —Ö–∞–±—Ä —Å —Ä–µ–¥–¥–∏—Ç–æ–º.</p>
        </div>
        <div class="button-container">
            <a href="/rss_habr" class="btn">üìú Habr</a>
            <a href="/rss_reddit" class="btn">üó®Ô∏è Reddit</a>
            <a href="/rss_nyt_sports" class="btn">‚öΩ NYT Sports</a>
        </div>
    </section>

    <!-- SCRIPT -->
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è UI
            function updateUI() {
                const token = localStorage.getItem("jwt");
                document.getElementById("login-btn").classList.toggle("hidden", !!token);
                document.getElementById("register-btn").classList.toggle("hidden", !!token);
                document.getElementById("logout-btn").classList.toggle("hidden", !token);

                const dancer = document.getElementById("dancer");
                if (dancer) {
                    dancer.classList.toggle("hidden", !token);
                }
            }

            updateUI();

            document.getElementById("logout-btn").addEventListener("click", function (event) {
                event.preventDefault();
                localStorage.removeItem("jwt");
                updateUI();
            });

            // --- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ª–æ–≤–∞ ---
            function loadWord(url) {
                const resultDiv = document.getElementById('api-result');
                resultDiv.style.opacity = "0"; // –ü–ª–∞–≤–Ω–æ–µ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ

                fetch(url)
                    .then(response => response.json())
                    .then(data => {
                        let html = `<h2 style="font-size: 36px; color: yellow;">${data.word}</h2>`;

                        if (data.definitions && data.definitions.length > 0) {
                            html += `<h3>–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è:</h3>`;
                            data.definitions.slice(0, 3).forEach(def => {
                                html += `<p>${def}</p>`;
                            });
                        }

                        if (data.examples && data.examples.length > 0) {
                            html += `<h3>–ü—Ä–∏–º–µ—Ä—ã:</h3>`;
                            data.examples.slice(0, 3).forEach(ex => {
                                html += `<p>${ex}</p>`;
                            });
                        }

                        resultDiv.innerHTML = html;
                        // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
                        setTimeout(() => {
                            resultDiv.style.opacity = "1";
                        }, 100);
                    })
                    .catch(error => {
                        console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–ª–æ–≤–∞:", error);
                        resultDiv.innerHTML = "<p style='color:red;'>–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ª–æ–≤–æ.</p>";
                    });
            }

            // –°–ª–æ–≤–æ –¥–Ω—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
            loadWord('/api/wordnik/day_word');

            // –ö–Ω–æ–ø–∫–∞ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Å–ª–æ–≤–∞ —Å –∫—É–ª–¥–∞—É–Ω–æ–º –∏ –∞–Ω–∏–º–∞—Ü–∏–µ–π
            const randomBtn = document.getElementById('random-btn');
            let cooldown = false;

            randomBtn.addEventListener('click', () => {
                if (cooldown) return;

                loadWord('/api/wordnik/random_word');

                cooldown = true;
                randomBtn.disabled = true;
                randomBtn.classList.add('cooldown');

                setTimeout(() => {
                    cooldown = false;
                    randomBtn.disabled = false;
                    randomBtn.classList.remove('cooldown');
                }, 3000); // 3 —Å–µ–∫
            });
        });
    </script>

</body>
</html>
